@using LoguiSueldo.Models
@model LoginViewModel

@{
    ViewBag.Title = "Iniciar sesión";
}
 
<div class="cuadro-loguin">
    <img class="profile-img" src="~/Logo MT 3 Mayuscula.png" />

    @using (Html.BeginForm("Login", "Account", new { ReturnUrl = ViewBag.ReturnUrl }, FormMethod.Post, new { @class = "form-horizontal", role = "form" }))
    {
        @Html.AntiForgeryToken()
        <div class="form-signin">
            <div style="padding-bottom:10px">
                @*@Html.ValidationSummary(true, "", new { @class = "text-danger" })*@
                @Html.TextBoxFor(m => m.Email, new { @class = "form-control", placeholder = "Email", autofocus = "autofocus" })
                @Html.ValidationMessageFor(m => m.Email, "", new { @class = "text-danger" })
            </div>

            <div style="padding-bottom:3px">
                @Html.PasswordFor(m => m.Password, new { @class = "form-control", placeholder = "Contraseña" })
                @Html.ValidationMessageFor(m => m.Password, "", new { @class = "text-danger" })
            </div>

            <label class="checkbox pull-left" style="margin-bottom:15px">
                @Html.CheckBoxFor(m => m.RememberMe)
                ¿Recordarme?
            </label>

            <input type="submit" id="btn-ingresar" onclick="OcultarIngresar();" value="Ingresar" class="btn btn-lg btn-primary btn-block" />
        
            <div title="Espere..." id="btn-ingresando" style="margin-top:40px" class="btn btn-lg btn-primary btn-block text-center ocultar">Ingresando...</div>       

            <span class="clearfix"></span>
        </div>
    }

    <a href="~/Account/RecuperarContraseña" style="margin-top:5px" class="text-center new-account">¿Se te olvidó tu contraseña?</a>

    <div style="margin-top:15px; margin-bottom:-15px">
        <h4 class="text-center registrarse">¿No tienes cuenta?  &nbsp;  <a onclick="this.onclick = function(){return false;}" class="btn btn-primary" style="width:130px" href="~/Account/Register" title="Registrarme"> Crear cuenta</a> </h4>
    </div>
</div>

<script>
    function OcultarIngresar() {
        $("#btn-ingresar").addClass("ocultar");
        $("#btn-ingresando").removeClass("ocultar");
    }
</script>

@if (ViewBag.ModelError == "Intento de inicio de sesión no válido.")
{
    <script>
        $("#btn-ingresar").removeClass("ocultar");
        $("#btn-ingresando").addClass("ocultar");
    </script>
}